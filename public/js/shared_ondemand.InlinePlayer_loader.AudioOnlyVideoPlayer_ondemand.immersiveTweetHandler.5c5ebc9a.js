(self.webpackChunk_twitter_responsive_web=self.webpackChunk_twitter_responsive_web||[]).push([["shared~ondemand.InlinePlayer~loader.AudioOnlyVideoPlayer~ondemand.immersiveTweetHandler"],{5996:(t,e,i)=>{"use strict";i.d(e,{Z:()=>Ne});i(34115),i(634),i(20796),i(14762),i(38695),i(27233),i(74083),i(18145),i(15735),i(43450),i(43108),i(32501),i(24895),i(99120),i(65584),i(26936),i(71245),i(14586),i(58143),i(43105),i(34769),i(58188),i(34114),i(77950),i(88233),i(28673),i(1939),i(6886),i(54226);var n,r,a,s,o=i(80753),c=i(81665),u=i(56666),l=i(22699),d=i.n(l);function h(t,e){var i;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"==typeof t)return p(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return p(t,e)}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0;return function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(i=t[Symbol.iterator]()).next.bind(i)}function p(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var v="AD_SKIP_EVENT",f="CAPTIONS_TOGGLED_EVENT",y="CONFIG_LOADED_EVENT",m="CTA_CLICK_EVENT",_="CTA_IMPRESSION_EVENT",g="ERROR_EVENT",b="FULL_SCREEN_EVENT",T="GROUPM_VIEW_EVENT",E="HEARTBEAT_EVENT",w="HEARTBEAT_START_EVENT",P="INITIAL_CTA_IMPRESSION_EVENT",S="INITIAL_INTEND_TO_PLAY_EVENT",M="INTEND_TO_PLAY_EVENT",k="LOOP_EVENT",C="MANUAL_QUALITY_LEVEL_CHANGE_EVENT",I="MRC_AUDIBLE_VIEW_EVENT",A="MRC_VIEW_EVENT",O="MUTE_EVENT",V="ONE_SEC_VIEW_EVENT",x="SIX_SEC_VIEW_EVENT",L="SHORT_FORM_COMPLETE_EVENT",N="PAUSE_EVENT",D="PLAY_EVENT",W="PLAY_FROM_TAP_EVENT",R="PLAYBACK_25_EVENT",F="PLAYBACK_50_EVENT",B="PLAYBACK_75_EVENT",H="PLAYBACK_95_EVENT",j="PLAYBACK_COMPLETE_EVENT",U="PLAYBACK_ERROR_EVENT",Z="PLAYBACK_LAPSE_EVENT",K="PLAYBACK_SPEED_CHANGE_EVENT",z="PLAYBACK_START_EVENT",Y="REPLAY_EVENT",G="REWIND_EVENT",J="SHRINK_EVENT",Q="STARTUP_ERROR_EVENT",q="TEARDOWN_EVENT",X="TICK_EVENT",$="TRACK_FINISHED_EVENT",tt="UNMUTE_EVENT",et="VIDEO_SESSION_EVENT",it="VIDEO_QUALITY_VIEW_EVENT",nt="VIDEO_VIEW_EVENT",rt="VIEW_THRESHOLD_EVENT",at="ad",st="content",ot="broadcast",ct="gif",ut="live",lt="media_entity",dt="partner_video",ht="periscope",pt="vine",vt="vmap",ft=((n={})[pt]=2,n[ct]=3,n[vt]=1,n[lt]=1,n[ut]=1,n[ht]=5,n[ot]=1,n),yt={event:"url",go_to:"url",image:"url",url:"url",shop:"url",see_more:"url",visit:"url",visit_site:"url",watch:"url",watch_now:"watch"},mt=1,_t=2,gt=3,bt=4,Tt=5,Et=6,wt=7,Pt=8;function St(t){return kt(t,t.source.trackId)}function Mt(t){return kt(t,t.currentTrackId)}function kt(t,e){return t.tracks.find((function(t){return e===t.id}))}function Ct(t){return t.tracks.find((function(t){return at===t.displayType}))}function It(t){return Boolean(t)&&t.isPlaying&&!t.isSeeking&&!t.isMuted}function At(t){var e;switch(t){case.25:e=Tt;break;case.5:e=mt;break;case.75:e=Et;break;case 1.25:e=wt;break;case 1.5:e=gt;break;case 1.75:e=Pt;break;case 2:e=bt;break;default:e=_t}return e}var Ot=((r={})[nt]="creativeView",r[R]="firstQuartile",r[F]="midpoint",r[B]="thirdQuartile",r[j]="complete",r[D]="resume",r[N]="pause",r[G]="rewind",r[g]="adError",r),Vt=function(){function t(t){var e=this;Object.keys(Ot).forEach((function(i){t.on(i,(function(t){e.fireBeacon(Ot[i],t)}))})),t.on(z,this.onPlaybackStart.bind(this))}var e=t.prototype;return e.onPlaybackStart=function(t){this.fireBeacon("start",t),this.fireBeacon("adImpression",t)},e.fireBeacon=function(t,e){var i=Mt(e);if(void 0!==i&&void 0!==i.beacons&&void 0!==i.beacons[t])for(var n,r=h(i.beacons[t]);!(n=r()).done;){var a=n.value;(new window.Image).src=a}},t}(),xt=function(){function t(t,e){this.bceHandler=e,this.bceHandler&&t.on(Z,this.onPlaybackLapseEvent.bind(this))}return t.prototype.onPlaybackLapseEvent=function(t,e){var i=null==e?void 0:e.playback_lapse_ms;this.bceHandler.log({wallClockWatchTimeMs:i})},t}(),Lt=function(){function t(t){this.analytics=t,this.analytics.on(X,this.onTickEvent.bind(this))}return t.prototype.onTickEvent=function(t){var e=t.areCaptionsShown,i=this.currentCaptionsState;i!==e&&((!1===i&&!0===e||!0===i&&!1===e)&&this.analytics.emit(f,t,e),this.currentCaptionsState=e)},t}(),Nt=function(){function t(t){this.analytics=t,this.hasFiredOnTrackMap={},this.analytics.on(_,this.onCtaImpressionEvent.bind(this))}return t.prototype.onCtaImpressionEvent=function(t){var e=t.currentTrackId;this.hasFiredOnTrackMap[e]||(this.hasFiredOnTrackMap[e]=!0,this.analytics.emit(P,t))},t}(),Dt=function(){function t(t){this.analytics=t,this.hasStarted=!1,this.hasFired=!1,this.analytics.on(z,this.onPlaybackStartEvent.bind(this)),this.analytics.on(M,this.onShowEvent.bind(this)),this.analytics.on(g,this.onErrorEvent.bind(this))}var e=t.prototype;return e.onPlaybackStartEvent=function(){this.hasStarted=!0},e.onShowEvent=function(){this.intentToPlayTime=new Date},e.onErrorEvent=function(t,e){var i=this.constructClientMediaEventError(t,e);if(!this.hasStarted&&!this.hasFired){var n,r=void 0!==this.intentToPlayTime?new Date-this.intentToPlayTime:void 0;i&&(n={latency_millis:r,error:i}),this.analytics.emit(Q,t,Object.assign({latency:r},e),n),this.hasFired=!0}this.analytics.emit(U,t,e,i)},e.constructClientMediaEventError=function(t,e){var i=e&&e.media_details&&e.media_details.media_error||{};return{is_fatal:i.is_fatal,category:i.category,message:i.message,retry_count:i.retry_count}},t}(),Wt=function(){function t(t){this.bufferingCount=0,this.bufferingDurationMs=0,this.bufferingBeginTimeMs=void 0,t.on(X,this.onTickEvent.bind(this)),t.on(w,this.onHeartbeatStart.bind(this)),t.on(E,this.onHeartbeat.bind(this))}var e=t.prototype;return e.onHeartbeat=function(t){this.reset(t)},e.onHeartbeatStart=function(t){this.reset(t)},e.onTickEvent=function(t){var e=Mt(t);void 0!==e&&(e.isBuffering&&null==this.bufferingBeginTimeMs?(this.bufferingBeginTimeMs=Date.now(),this.bufferingCount++):e.isBuffering||null==this.bufferingBeginTimeMs||(this.bufferingDurationMs+=Date.now()-this.bufferingBeginTimeMs,this.bufferingBeginTimeMs=void 0))},e.getBufferTime=function(t){var e=Mt(t);if(void 0!==e){var i=this.bufferingDurationMs;return e.isBuffering&&null!=this.bufferingBeginTimeMs&&(i+=Date.now()-this.bufferingBeginTimeMs),i}},e.reset=function(t){var e=Mt(t);void 0!==e&&(this.bufferingBeginTimeMs=e.isBuffering?Date.now():void 0,this.bufferingCount=e.isBuffering?1:0,this.bufferingDurationMs=0)},t}();function Rt(t){return"number"!=typeof t||Number.isNaN(t)||t===1/0||t===-1/0?"string"==typeof t?t:void 0:t.toString()}var Ft=function(){function t(t){this.analytics=t,this.bufferingDurationListener=new Wt(t),this.lastKnownDataUsageBytes=0,this.audibleDuration=0,this.bitrateHistory=[],this.latencyHistory=[],this.previousTickTimestamp,this.analytics.on(X,this.onTickEvent.bind(this)),this.analytics.on(D,this.onPlayEvent.bind(this)),this.analytics.on(z,this.onPlaybackStartEvent.bind(this)),this.analytics.on($,this.onTrackFinishedEvent.bind(this)),this.analytics.on(g,this.onErrorEvent.bind(this)),this.analytics.on(N,this.onPauseEvent.bind(this)),this.analytics.on(q,this.onTeardownEvent.bind(this)),this.analytics.on(k,this.onLoopEvent.bind(this)),this.analytics.on(v,this.onAdSkip.bind(this))}var e=t.prototype;return e.onTickEvent=function(t){var e=Mt(t);if(void 0!==e){if(this.updateTimesOnTick(e,t),this.updatePerfMetrics(e),t.isSeeking?this.stopPolling():t.isPlaying&&this.startPolling(t),void 0!==this.lastKnownPlayerState){var i=this.lastKnownPlayerState.percentVisible,n=t.percentVisible;(i>0&&0===n||0===i&&n>0)&&(this.stopPolling(),this.startPolling(t))}this.lastKnownPlayerState=t,this.previousTickTimestamp=Date.now()}},e.onPlayEvent=function(t){this.hasPlaybackStarted&&this.startPolling(t),this.lastKnownPlayerState=t},e.onPlaybackStartEvent=function(t){this.startPolling(t),this.lastKnownPlayerState=t,this.hasPlaybackStarted=!0},e.onTrackFinishedEvent=function(t){this.hasPlaybackStarted=!1,void 0!==Mt(t)&&(this.stopPolling(),this.lastKnownPlayerState=t)},e.onErrorEvent=function(t,e){e&&e.media_details&&e.media_details.media_error&&e.media_details.media_error.is_fatal&&(this.stopPolling(),this.lastKnownPlayerState=t)},e.onPauseEvent=function(t,e){this.stopPolling(),this.lastKnownPlayerState=t},e.onTeardownEvent=function(t,e){this.stopPolling(!0),this.lastKnownPlayerState=t},e.onLoopEvent=function(t){this.startPolling(t)},e.onAdSkip=function(){this.stopPolling()},e.updateTimesOnTick=function(t,e){var i;void 0!==(i=t.contentType===ot||t.contentType===ut||t.contentType===ht?t.absoluteTimeMs:t.currentTimeMs)&&(It(e)&&void 0!==this.lastTimeMs&&(this.audibleDuration+=i-this.lastTimeMs),this.lastTimeMs=i,void 0===this.startTimeMs&&(this.startTimeMs=i))},e.startPolling=function(t){var e=St(t);void 0===this.intervalId&&void 0!==e&&e.contentType!==pt&&(this.analytics.emit(w,t),this.onHeartbeatStart(t))},e.stopPolling=function(t){(this.intervalId||t)&&(this.onHeartbeat(),this.lastTimeMs=void 0,this.startTimeMs=void 0),void 0!==this.intervalId&&(clearInterval(this.intervalId),this.intervalId=void 0)},e.onHeartbeatStart=function(t){this.intervalId=setInterval(this.onHeartbeat.bind(this),t.heartbeatIntervalMs||5e3),this.lastTimeMs=void 0,this.startTimeMs=void 0,this.bitrateHistory=[],this.latencyHistory=[]},e.updatePerfMetrics=function(t){if(this.previousTickTimestamp){var e=Date.now()-this.previousTickTimestamp;t.currentBitrate&&this.bitrateHistory.push({value:t.currentBitrate,weight:e}),t.liveLatencyMs&&this.latencyHistory.push({value:t.liveLatencyMs,weight:e})}},e.onHeartbeat=function(){var t=this.lastKnownPlayerState;if(t){var e=Mt(t),i=this.getProgramDateTimeMs();if(void 0!==i&&void 0!==e){var n=e.currentBitrate?{sampled_bitrate:e.currentBitrate}:{},r=0;t.dataUsageBytes&&(r=t.dataUsageBytes-this.lastKnownDataUsageBytes,this.lastKnownDataUsageBytes=t.dataUsageBytes);var a,s,o={data_usage_bytes:r},c=this.bufferingDurationListener.bufferingCount,u=this.bufferingDurationListener.getBufferTime(t),l=Math.floor(100*t.percentVisible),d=Object.assign({buffering_duration_millis:u,video_visibility:l},{start_program_date_time_millis:i.start_program_date_time_millis,end_program_date_time_millis:i.end_program_date_time_millis},n,o),h={buffering_duration_millis:Rt(u),buffering_count:c,percent_in_view:l,sampled_bits_per_second:e.currentBitrate,data_usage_bytes:Rt(o.data_usage_bytes),start_program_date_time_millis:Rt(i.start_program_date_time_millis),end_program_date_time_millis:Rt(i.end_program_date_time_millis),audible_duration_millis:Rt(i.audible_duration_millis),bandwidth_estimate_bps:Rt(t.bandwidthEstimateBps),bitrate_metrics:(a=this.bitrateHistory,s=Ht(a),s&&{min_bps:Math.round(s.min),max_bps:Math.round(s.max),avg_bps:Math.round(s.avg)}),live_or_non_live_heartbeat_metrics:Bt(e.isLive,this.latencyHistory)};this.analytics.emit(E,t,d,h)}}},e.getProgramDateTimeMs=function(){if(void 0!==this.startTimeMs&&void 0!==this.lastTimeMs){var t=this.startTimeMs,e=this.lastTimeMs,i=this.audibleDuration;return this.startTimeMs=this.lastTimeMs,this.audibleDuration=0,{start_program_date_time_millis:Math.round(t),end_program_date_time_millis:Math.round(e),audible_duration_millis:Math.round(i)}}return{}},t}();function Bt(t,e){var i=Ht(e);return t?{live_heartbeat_metrics:{latency_metrics:i&&{min_ms:Math.round(i.min),max_ms:Math.round(i.max),avg_ms:Math.round(i.avg)}}}:{non_live_heartbeat_metrics:{}}}function Ht(t){if(t&&t.length){var e=function(t){if(!t||0===t.length)return[Math.min(),Math.max()];for(var e,i=1/0,n=-1/0,r=h(t);!(e=r()).done;){var a=e.value;i=Math.min(i,a),n=Math.max(n,a)}return[i,n]}(t.map((function(t){return t.value}))),i=e[0],n=e[1],r=function(t){var e=t.reduce((function(t,e){return t+e.weight}),0);return t.reduce((function(t,e){return t+e.value*e.weight}),0)/e}(t);return{min:i,max:n,avg:r}}}var jt=function(){function t(t){this.analytics=t,this.hasFiredOnTrackMap={},this.analytics.on(M,this.onIntendToPlayEvent.bind(this)),this.analytics.on(Y,this.onIntendToPlayEvent.bind(this)),this.analytics.on($,this.onTrackFinishedEvent.bind(this))}var e=t.prototype;return e.onIntendToPlayEvent=function(t){this.hasFiredOnTrackMap[t.currentTrackId]||(this.hasFiredOnTrackMap[t.currentTrackId]=!0,this.analytics.emit(S,t))},e.onTrackFinishedEvent=function(t){var e=Mt(t);e&&(e.shouldLoop||(this.hasFiredOnTrackMap[t.currentTrackId]=!1))},t}(),Ut=function(){function t(t){this.analytics=t,this.analytics.on($,this.onTrackFinishedEvent.bind(this))}return t.prototype.onTrackFinishedEvent=function(t){var e=Mt(t);void 0!==e&&e.shouldLoop&&this.analytics.emit(k,t)},t}(),Zt={home:"HomeTimeline",list:"Lists",live_broadcast:"BroadcastPage",live_event_timeline:"EventPage",me:"UserTimeline",moments:"Moments",permalink:"TweetCard",profile:"UserTimeline",search:"Search"},Kt=function(t){return"/api/v2/"+t};function zt(t,e,i,n){return{start:{method:t,path:Kt(e)},ping:{method:t,path:Kt(i)},stop:{method:t,path:Kt(n)}}}var Yt,Gt={public:{live:zt("GET","startPublic","pingPublic","stopPublic"),replay:zt("GET","replayViewedPublic","pingReplayViewedPublic","endReplayViewedPublic")},auth:{live:zt("POST","startWatching","pingWatching","stopWatching"),replay:zt("POST","replayViewed","pingReplayViewed","endReplayViewed")}},Jt=function(){function t(t,e){if(this.httpClient=t,this.authToken=null==e?void 0:e.periscopeAuthToken,this.lifecycles=this.authToken?Gt.auth:Gt.public,(null==e?void 0:e.scribeContext)&&(null==e?void 0:e.periscopeComponent)){var i=e.scribeContext,n=e.periscopeComponent;this.pageContext=this.getPageContext(i),this.componentContext=n}}var e=t.prototype;return e.getPageContext=function(t){var e=t.page;return"permalink_overlay"===t.section?"TweetCard":Zt[e]||""},e.call=function(t,e){var i=Date.now(),n={"X-Idempotence":Yt=i<=Yt?Yt+1:i,"X-Attempt":1,"X-Periscope-User-Agent":"Twitter/video-analytics","content-type":"application/json"},r=Object.assign({},e);this.authToken&&(r.cookie=this.authToken);var a=t.method,s=t.path,o={};return"POST"===a?o.data=r:o.params=r,this.httpClient.dispatch(Object.assign({headers:n,host:"https://proxsee.pscp.tv",method:a,path:s},o))},e.videoStartWatching=function(t,e,i){var n=this;return new Promise((function(r,a){("string"!=typeof t||t.length<1)&&a(new Error("Cannot videoStartWatching. lifecycleToken not valid, lifecycleToken="+t));var s=e?n.lifecycles.replay.start:n.lifecycles.live.start,o={life_cycle_token:t,auto_play:!!i};n.pageContext&&(o.page=n.pageContext),n.componentContext&&(o.component=n.componentContext),n.call(s,o).then((function(t){var i=JSON.parse(t.body);return e||i.session?r(i.session):a(new Error("["+s.path+"] did not return a session"))}),a)}))},e.videoPingWatching=function(t,e){var i=this;return new Promise((function(n,r){("string"!=typeof t||t.length<1)&&r(new Error("Cannot videoPingWatching. session not valid, session="+t));var a=e?i.lifecycles.replay.ping:i.lifecycles.live.ping;i.call(a,{session:t}).then((function(t){JSON.parse(t.body).success?n():r(new Error("Ping request failed"))}),r)}))},e.videoStopWatching=function(t,e){var i=this;return new Promise((function(n,r){("string"!=typeof t||t.length<1)&&r(new Error("Cannot videoStopWatching. session not valid, session="+t));var a=e?i.lifecycles.replay.stop:i.lifecycles.live.stop;i.call(a,{session:t}).then((function(t){JSON.parse(t.body).success?n():r(new Error("StopWatching request failed"))}),r)}))},t}(),Qt=3e3;var qt=function(){function t(t){this.api=t,this.handleStartWatching=this.handleStartWatching.bind(this),this.updateSession=this.updateSession.bind(this),this.startPingWatching=this.startPingWatching.bind(this),this.isVideoPreview=!1,this.isReplay=!0}var e=t.prototype;return e.updateSession=function(t){this.session=t,t&&this.startPingWatching()},e.setStartWatchingTimer=function(){this.startWatchingTimer=setTimeout(this.handleStartWatching,Qt)},e.clearStartWatchingTimer=function(){this.startWatchingTimer&&clearTimeout(this.startWatchingTimer)},e.handleStartWatching=function(){if(!this.isWatching){this.stopPingWatching();var t=this.api.videoStartWatching(this.lifecycleToken,this.isReplay,this.isVideoPreview).then(this.updateSession);return this.isWatching=!0,t}},e.startPingWatching=function(){var t=this;this.stopPingWatching(),this.pingWatchingTimer=setInterval((function(){t.isWatching?t.api.videoPingWatching(t.session,t.isReplay):t.stopPingWatching()}),3e4)},e.stopPingWatching=function(){clearInterval(this.pingWatchingTimer)},e.updateLifecycleToken=function(t){void 0!==t&&t!==this.lifecycleToken&&(this.lifecycleToken=t,this.isWatching&&(this.stopWatching(),this.handleStartWatching()))},e.updateIsReplay=function(t){void 0!==t&&t!==this.isReplay&&(this.isReplay=t)},e.startWatching=function(){return this.isVideoPreview=!1,this.handleStartWatching()},e.startWatchingPreview=function(){this.isVideoPreview=!0,this.clearStartWatchingTimer(),this.setStartWatchingTimer()},e.stopWatching=function(){this.isWatching&&(this.stopPingWatching(),this.session&&this.api.videoStopWatching(this.session,this.isReplay),this.isWatching=!1)},e.destroy=function(){this.stopWatching(),this.clearStartWatchingTimer(),this.isVideoPreview=void 0,this.lifecycleToken=void 0,this.session=void 0,this.isReplay=void 0,this.isWatching=void 0,this.pingWatchingTimer=void 0},t}(),Xt=[y,D,N,$,q],$t=function(){function t(t,e){var i=this;this.analytics=t,this.lifecycleController=e,Xt.map((function(t){return i.analytics.on(t,i.possiblyHandleEvent.bind(i,t))}))}var e=t.prototype;return e.possiblyHandleEvent=function(t,e){if(this.shouldSendPeriscopeAnalytics(e)){var i=Mt(e);switch(t){case y:this.updateLifecycleToken(e),this.updateReplayState(!i.isLive);break;case D:this.handleStartWatching(e);break;case N:this.handleStopWatching(e);break;case $:this.handleStopWatching(e),this.updateReplayState(!0);break;case q:this.teardownPeriscopeLifecycle()}}},e.shouldSendPeriscopeAnalytics=function(t){var e=Mt(t);return void 0!==e&&(e.contentType===ht||e.contentType===ot)},e.getLifecycleToken=function(t){return Mt(t).lifecycleToken},e.updateLifecycleToken=function(t){var e=this.getLifecycleToken(t);this.lifecycleController.updateLifecycleToken(e)},e.updateReplayState=function(t){this.lifecycleController.updateIsReplay(t)},e.handleStartWatching=function(t){this.getLifecycleToken(t)&&(t.isPreview?this.lifecycleController.startWatchingPreview():this.lifecycleController.startWatching())},e.handleStopWatching=function(t){this.getLifecycleToken(t)&&this.lifecycleController.stopWatching()},e.teardownPeriscopeLifecycle=function(){this.lifecycleController.destroy(),this.lifecycleController=null},t}(),te=function(){function t(t){this.analytics=t,this.lapseMap={},this.analytics.on(X,this.onTickEvent.bind(this)),this.analytics.on($,this.onTrackFinishedEvent.bind(this)),this.analytics.on(v,this.onAdSkipEvent.bind(this)),this.analytics.on(nt,this.onVideoViewEvent.bind(this))}var e=t.prototype;return e.onTrackFinishedEvent=function(t){var e=Mt(t);if(void 0!==e){var i=this.lapseMap[e.id];if(void 0!==i){i.timePlayedToMs=0;var n=St(t);n&&n.contentType!==ct&&!e.shouldLoop&&(this.emit(i,t),i.viewFired=!1)}}},e.onAdSkipEvent=function(t){this.onTickEvent(t);var e=Mt(t);if(void 0!==e){var i=this.lapseMap[e.id];this.emit(i,t)}},e.onVideoViewEvent=function(t){var e=Mt(t);if(void 0!==e){var i=this.lapseMap[e.id];void 0===i&&(i=this.initializeLapseMapForTrack(e),this.lapseMap[e.id]=i),i.viewFired=!0}},e.onTickEvent=function(t){var e=Mt(t);if(void 0!==e){var i=this.lapseMap[e.id];void 0===i&&(i=this.initializeLapseMapForTrack(e),this.lapseMap[e.id]=i),t.isSeeking?i.timePlayedToMs=e.currentTimeMs:(this.updateTimingData(e,i),this.checkPlaybackLapse(i,t))}},e.initializeLapseMapForTrack=function(t){return{timePlayedMs:0,timePlayedToMs:t.currentTimeMs,viewFired:!1}},e.updateTimingData=function(t,e){var i=t.currentTimeMs-e.timePlayedToMs;e.timePlayedToMs=t.currentTimeMs,e.timePlayedMs+=i},e.checkPlaybackLapse=function(t,e){t.timePlayedMs>1e4&&this.emit(t,e)},e.emit=function(t,e){var i=St(e),n=t.viewFired,r=t.timePlayedMs;n&&r>0&&i&&i.contentType!==ut&&(this.analytics.emit(Z,e,{playback_lapse_ms:Math.round(r)}),t.timePlayedMs=0)},t}(),ee=function(t){return e="AD_CTA_TO_ENGAGEMENT_MAPPING_ERROR",(i=new Error("Unable to map CTA type to engagement type for: "+t)).name=e,i;var e,i},ie=function(){function t(){}return t.set=function(e){t.report=e},t}();(0,u.Z)(ie,"report",(function(t){}));var ne=((a={})[z]="playback_start",a[R]="playback_25",a[F]="playback_50",a[B]="playback_75",a[H]="playback_95",a[j]="playback_complete",a[A]="mrc_view",a[T]="groupm_view",a[V]="1sec_view",a[x]="6sec_view",a[L]="short_form_complete",a[nt]="view",a[W]="play_from_tap",a[rt]="view_threshold",a),re=function(){function t(t,e){var i=this;this.promotedLogHandler=e,Object.keys(ne).forEach((function(e){t.on(e,(function(t,n){var r=Mt(t);if(void 0!==r){var a=r.displayType===at;i.log(i.buildEventName(e,r),t,n,{video_details:{is_preroll_video:a,video_type:ft[r.contentType]}})}}))})),t.on(z,this.logImpression.bind(this)),t.on(m,this.onCtaClickEvent.bind(this)),t.on(et,this.onVideoSessionEvent.bind(this))}var e=t.prototype;return e.buildEventName=function(t,e){var i=ne[t];return"video_"+e.displayType+"_"+i},e.log=function(t,e,i,n){void 0===i&&(i={});var r=Mt(e),a=this.getPromotedEventData(e,r);if(void 0!==a.impression_id){var s=this.getAmplifyDetailsData(e,r,i),o=JSON.stringify({amplify_details:s}),c=n&&JSON.stringify(n),u=Object.assign(a,s,{event:t,card_event:o,engagement_metadata:c});this.promotedLogHandler.log(u)}},e.logImpression=function(t){var e=Mt(t);this.isPromotedTrack(t,e)&&this.log("impression",t)},e.onCtaClickEvent=function(t){var e=Mt(t),i=null==e?void 0:e.cta,n=yt[null==i?void 0:i.type];if(!n)return ie.report(ee(null==i?void 0:i.type));e.displayType===at?this.log("video_"+e.displayType+"_cta_"+n+"_click",t):this.log("video_cta_"+n+"_click",t)},e.onVideoSessionEvent=function(t,e){void 0!==e&&this.log("video_session",t,{},e)},e.isPromotedTrack=function(t,e){return e&&e.impressionId&&e.disclosureType},e.getPromotedEventData=function(t,e){var i=e.disclosureType||t.disclosureType;return{impression_id:e.impressionId||t.impressionId,earned:"earned"===i}},e.getAmplifyDetailsData=function(t,e,i){var n=St(t),r=Ct(t)||{};return Object.assign({content_id:n.contentId,dynamic_preroll_type:r.dynamicPrerollType,preroll_uuid:r.contentId,preroll_owner_id:r.publisherId,video_owner_id:e.publisherId,video_uuid:e.contentId,video_type:e.displayType===st?"video":"ad",video_is_muted:t.isMuted,video_visibility:Math.floor(100*t.percentVisible)},i)},t}(),ae=function(){function t(t){this.analytics=t,this.analytics.on(X,this.onTickEvent.bind(this))}return t.prototype.onTickEvent=function(t){var e=Mt(t);void 0!==e&&(t.isSeeking&&void 0===this.seekingStartTime?this.seekingStartTime=e.currentTimeMs:t.isSeeking||void 0===this.seekingStartTime||(e.currentTimeMs<this.seekingStartTime&&this.analytics.emit(G,t),this.seekingStartTime=void 0))},t}(),se=((s={})[nt]="video_view",s[W]="play_from_tap",s[rt]="view_threshold",s[I]="video_mrc_audible_view",s[A]="video_mrc_view",s[x]="video_6sec_view",s[L]="video_short_form_complete",s[z]="playback_start",s[R]="playback_25",s[F]="playback_50",s[B]="playback_75",s[H]="playback_95",s[j]="playback_complete",s[S]="intent_to_play",s[D]="play",s[N]="pause",s[Y]="replay",s[k]="loop",s[O]="mute",s[tt]="unmute",s[b]="full_screen",s[J]="shrink",s[Z]="playback_lapse",s[U]="error",s[Q]="playback_startup_error",s[it]="video_quality_view",s[v]="video_ad_skip",s),oe=["playback_lapse","video_1sec_view","shrink","full_screen"].reduce((function(t,e){return t[e]=!0,t}),{}),ce="tweet",ue="client_event",le="live_video_heartbeat_event",de=7,he=13,pe=16,ve=26,fe=28,ye=1,me=2,_e=1,ge=2,be=["appplayer","poll2choice_video","poll3choice_video","poll4choice_video","promo_video_convo","promo_video_website","video_direct_message"],Te=/^([0-9]{1,2})_([0-9]+)$/,Ee=function(){function t(t,e,i){var n=this;this.scribeHandler=e,this.context=i||{},this.isAdFormatsCard=-1!==be.indexOf(this.context.cardType),Object.keys(se).forEach((function(e){t.on(e,(function(t,i,r){n.scribe(se[e],t,i,r)}))})),t.on(m,this.onCtaClickEvent.bind(this)),t.on(P,this.onCtaImpressionEvent.bind(this)),t.on(E,this.onHeartbeatEvent.bind(this)),t.on(f,this.onCaptionsToggledEvent.bind(this)),t.on(C,this.onManualQualityLevelChangeEvent.bind(this)),t.on(K,this.onPlaybackSpeedChangeEvent.bind(this))}var e=t.prototype;return e.onCaptionsToggledEvent=function(t,e){var i=e?"enable":"disable",n={page:"settings",section:"captions",element:"display_audio_transcriptions",action:i};this.scribe(i,t,{},{},ue,n)},e.onCtaClickEvent=function(t){var e=Mt(t).cta,i=yt[null==e?void 0:e.type];if(!i)return ie.report(ee(null==e?void 0:e.type));var n=null!=(null==e?void 0:e.click_tracking_embed_details)?{click_tracking_embed_details:null==e?void 0:e.click_tracking_embed_details}:{};this.scribe("cta_"+i+"_click",t,{},{},ue,null,n)},e.onCtaImpressionEvent=function(t){var e=Mt(t).cta,i=yt[null==e?void 0:e.type];if(!i)return ie.report(ee(null==e?void 0:e.type));this.scribe("cta_"+i+"_impression",t)},e.onHeartbeatEvent=function(t,e,i){var n=St(t);if(void 0!==n){var r;switch(n.contentType){case ut:case ot:r=le;break;default:r=ue}this.scribe("heartbeat",t,e,i,r)}},e.onManualQualityLevelChangeEvent=function(t,e){var i=e.oldLevel,n=e.newLevel;this.scribe("manual_quality_level_change",t,{},{oldLevel:i,newLevel:n})},e.onPlaybackSpeedChangeEvent=function(t,e){var i=e.newSpeed,n=e.oldSpeed,r={newSpeed:At(i),oldSpeed:At(n)};this.scribe("playback_speed_change",t,{},r)},e.scribe=function(t,e,i,n,r,a,s){void 0===i&&(i={}),void 0===n&&(n={}),void 0===r&&(r=ue),void 0===a&&(a=null),void 0===s&&(s={});var o,c,u=St(e)||{},l=Mt(e)||{},d=Ct(e)||{},h=e.session||{},p=(e.features||{}).isLiveTimecodeEnabled&&l.requestedTimecode>0?1e3*l.requestedTimecode:void 0;this.isActionSupportedInClientMediaEvent(t)&&(o={media_client_event_type:(c={},c[t]=n,c),session_state:{session_id:h.id,content_video_identifier:Pe(this.getContentIdentifier(u),this.context.scribeContext),video_ads_passthrough_data:e.videoAnalyticsScribePassthrough,live_event_identifier:this.getLiveEventIdentifier(e,u.contentType),tweet_id:this.getTweetId(e.source,u.contentType)},playing_media_state:{video_type:l.displayType===st?me:ye,media_asset_url:this.getVariantUrl(l),media_timecode_millis:Rt(p),media_metadata:{broadcast_id:l.broadcastId,twitter_publisher_id:Rt(l.publisherId),publisher_identifier:Se(l.publisherId,l.periscopePublisherId,this.context.scribeContext)},broadcast_media_state:Me(l.contentType,l.isLive)},player_state:{is_muted:e.isMuted}});var v=Object.assign({},this.getBaseItem(e.source,e.eventId),{media_asset_url:this.getVariantUrl(l),video_uuid:l.contentId,video_owner_id:l.publisherId,video_type:l.displayType===st?"video":"ad",promoted_id:l.impressionId||e.impressionId,content_id:u.contentId,dynamic_preroll_type:d.dynamicPrerollType,preroll_uuid:d.contentId,preroll_owner_id:d.publisherId,publisher_id:u.publisherId,media_session_id:h.id,video_analytics_scribe_passthrough:e.videoAnalyticsScribePassthrough,client_media_event:o,media_timecode_millis:p,disclosure_type:l.disclosureType||e.disclosureType},i,this.getLexMetadata(e,u)),f=a||{element:this.getScribeElement(u),action:t};this.scribeHandler.log({namespace:f,category:r,data:Object.assign({},s,{items:[v]})})},e.getContentIdentifier=function(t){var e=t.contentId,i=this.parseMediaKeyString(e);if(i)return{media_platform_identifier:i};switch(t.contentType){case lt:case ct:case ut:case ot:return this.getMediaPlatformIdentifierUsingDefaultCategory(t);case vt:return this.isAdFormatsCard?{media_platform_identifier:{media_category:this.getMediaEntityCategoryUsingPlaybackUrl(t),media_id:e}}:{amplify_card_identifier:{vmap_url:t.vmapUrl,content_id:e}};default:return{unknown_identifier:{content_id:e}}}},e.parseMediaKeyString=function(t){var e=Te.exec(t)||[],i=e[1],n=e[2],r=+i;if(r&&n)return{media_category:r,media_id:n}},e.getMediaPlatformIdentifierUsingDefaultCategory=function(t){var e=this.defaultMediaCategory(t);return e?{media_platform_identifier:{media_category:e,media_id:t.contentId}}:{unknown_identifier:{content_id:t.contentId}}},e.getMediaEntityCategoryUsingPlaybackUrl=function(t){var e=this.getVariantUrl(t);if(e){if(-1!==e.indexOf("amplify_video"))return he;if(-1!==e.indexOf("ext_tw_video"))return de}},e.defaultMediaCategory=function(t){switch(t.contentType){case ct:return pe;case ut:return ve;case ot:return fe;case lt:return this.getMediaEntityCategoryUsingPlaybackUrl(t);default:return}},e.getLiveEventIdentifier=function(t,e){return t.eventId?{lex_event_identifier:{lex_event_id:t.eventId}}:e===ut?{legacy_live_event_identifier:{legacy_live_event_id:t.source.id}}:void 0},e.getTweetId=function(t,e){return e===ot||e===ut?t.tweetId:t.type===ce?t.id:void 0},e.getScribeElement=function(t){switch(t.contentType){case pt:return"vine_player";case ct:return"gif_player";case vt:return"platform_amplify_card";case ut:case ot:return"live_video_player";case dt:return"partner_video_player";case ht:return"periscope_player";default:return"video_player"}},e.getBaseItem=function(t,e){var i=this.context.baseScribeItem;return i||(t.type===ce?{id:t.id,item_type:"0"}:t.tweetId?{id:t.tweetId,item_type:"0"}:e?{id:e,item_type:"28"}:void 0)},e.getLexMetadata=function(t,e){var i=this.context.scribeContext||{},n={},r={};return e.broadcastId&&(n.is_replay_broadcast=!e.isLive,r.tweet_id=t.source.tweetId,"live_event_timeline"===i.page&&"tweet"!==i.component?n.host_broadcast_id=e.broadcastId:n.target_broadcast_id=e.broadcastId),t.eventId&&("live_event_timeline"===i.page&&"tweet"!==i.component?r.host_event_id=t.eventId:r.target_event_id=t.eventId),{live_broadcast_details:n,live_video_event_details:r}},e.getVariantUrl=function(t){var e=t.variants&&t.variants[t.currentVariantIndex];return e&&e.src},e.isActionSupportedInClientMediaEvent=function(t){return!oe[t]},t}();function we(t){return t&&"messages"===t.page}function Pe(t,e){return we(e)?{scrubbed_identifier:{}}:t}function Se(t,e,i){return we(i)?{scrubbed_publisher_identifier:{}}:t&&e?{twitter_periscope_publisher_identifier:{twitter_id:Rt(t),periscope_id:e}}:t?{twitter_publisher_identifier:{id:Rt(t)}}:e?{periscope_publisher_identifier:{id:e}}:{unknown_publisher_identifier:{}}}function Me(t,e){if(t===ot||t===ut||t===ht)return{broadcast_state:e?_e:ge}}var ke=function(){function t(t){this.analytics=t,this.analytics.on(Y,this.onReplayEvent.bind(this)),this.analytics.on($,this.onTrackFinishedEvent.bind(this)),this.analytics.on(S,this.onInitialIntendToPlayEvent.bind(this))}var e=t.prototype;return e.onInitialIntendToPlayEvent=function(t){this.resetLatencyStartDate(t.intentToPlayTime)},e.onReplayEvent=function(){this.resetLatencyStartDate()},e.onTrackFinishedEvent=function(t){this.resetLatencyStartDate(),this.trackId!==t.currentTrackId&&(this.trackId=t.currentTrackId)},e.resetLatencyStartDate=function(t){this.latencyStartDate=t||new Date},e.getLatencyData=function(){if(void 0!==this.latencyStartDate)return{latency:new Date-this.latencyStartDate}},t}(),Ce=[{progress:.25,event:R},{progress:.5,event:F},{progress:.75,event:B},{progress:.95,event:H},{progress:1,event:j}],Ie=function(){function t(t){this.analytics=t,this.eventMap={},this.playbackLatencyListener=new ke(t),this.analytics.on($,this.onTrackFinishedEvent.bind(this)),this.analytics.on(X,this.onTickEvent.bind(this))}var e=t.prototype;return e.onTrackFinishedEvent=function(t){var e=Mt(t);void 0!==e&&(e.shouldLoop||(this.eventMap[t.currentTrackId]={}))},e.onTickEvent=function(t){var e=Mt(t);if(void 0!==e&&e.durationMs){var i=this.eventMap[e.id];void 0===i&&(i={},this.eventMap[e.id]=i),this.checkAllTentpoles(e,i,t)}},e.checkAllTentpoles=function(t,e,i){if(i.isPlaying){var n=t.durationMs,r=t.currentTimeMs,a=this.playbackLatencyListener.getLatencyData()||{},s={latency_millis:a.latency,cache_info:{notCached:{}}};this.emitOnce(z,e,i,a,s),t.isLive||this.checkProgressTentpoles(n,r,e,i)}},e.checkProgressTentpoles=function(t,e,i,n){var r=this;Ce.forEach((function(a){var s=a.progress*t;e>=s-1e3&&e<=s+1e3&&r.emitOnce(a.event,i,n)}))},e.emitOnce=function(t,e,i,n,r){e[t]||(this.analytics.emit(t,i,n,r),e[t]=!0)},t}(),Ae=[0,5,10,15,20,25,30,35,40,45,50,55,60,65,70,75,80,85,90,95,100],Oe=function(){function t(t){this.analytics=t,this.sessionDataStore={},this.analytics.on(X,this.onTickEvent.bind(this)),this.analytics.on(b,this.onFullscreenEvent.bind(this)),this.analytics.on(J,this.onShrinkEvent.bind(this)),this.analytics.on($,this.onTrackFinishedEvent.bind(this)),this.analytics.on(v,this.onTrackInterrupt.bind(this)),this.analytics.on(q,this.onTrackInterrupt.bind(this))}var e=t.prototype;return e.onTickEvent=function(t){var e=Mt(t);if(void 0!==e){var i=this.getOrCreateNewSessionDataForTrack(e,t);t.isSeeking?i.currentTimeMs=e.currentTimeMs:this.updateViewData(e,i,t)}},e.onFullscreenEvent=function(t){var e=Mt(t);void 0!==e&&(this.getOrCreateNewSessionDataForTrack(e,t).isFullscreenMode=!0)},e.onShrinkEvent=function(t){var e=Mt(t);void 0!==e&&(this.getOrCreateNewSessionDataForTrack(e,t).isFullscreenMode=!1)},e.onTrackFinishedEvent=function(t){var e=Mt(t);if(void 0!==e){var i=this.sessionDataStore[e.id];if(void 0!==i)if(e.shouldLoop)i.currentTimeMs=0;else{if(i.timeWatchedMs>0){var n=this.constructVideoSessionDetails(i,e);this.emitVideoSessionEvent(t,n)}this.sessionDataStore[e.id]=void 0}}},e.onTrackInterrupt=function(t){var e=Mt(t);if(void 0!==e){var i=this.sessionDataStore[e.id];if(void 0!==i){if(i.timeWatchedMs>0){var n=this.constructVideoSessionDetails(i,e);this.emitVideoSessionEvent(t,n)}this.sessionDataStore[e.id]=void 0}}},e.getOrCreateNewSessionDataForTrack=function(t,e){var i=this.sessionDataStore[t.id];return void 0===i&&(i={sizesInfoAtTheStart:e.sizesInfo,currentTimeMs:t.currentTimeMs,isFullscreenMode:!1,timeWatchedMs:0,timeWatchedFullscreenMs:0,timeWatchedWithAudioMs:0,timeWatchedFullscreenWithAudioMs:0,watchedMsByInViewPct:this.generateNewAggregateHistogram(),watchedWithAudioMsByInViewPct:this.generateNewAggregateHistogram(),watchedMsByViewportPct:this.generateNewAggregateHistogram(),maxContinuousWatchedMsByInViewPct:this.generateNewMaxContinuousHistogram(),maxContinuousWatchedWithAudioMsByInViewPct:this.generateNewMaxContinuousHistogram()},this.sessionDataStore[t.id]=i),i},e.generateNewAggregateHistogram=function(){for(var t,e={},i=h(Ae);!(t=i()).done;){e[t.value]=0}return e},e.generateNewMaxContinuousHistogram=function(){for(var t,e={},i=h(Ae);!(t=i()).done;){e[t.value]={current:0,max:0}}return e},e.resetContinuousViewDataForHistogram=function(t){for(var e,i=h(Ae);!(e=i()).done;){var n=e.value;this.resetContinuousViewDataForBucket(t[n])}},e.resetContinuousViewDataForBucket=function(t){t.max=Math.max(t.current,t.max),t.current=0},e.updateViewData=function(t,e,i){var n=t.currentTimeMs-e.currentTimeMs,r=e.isFullscreenMode?1:i.percentVisible,a=e.isFullscreenMode?1:i.percentOfViewportOccupied;e.currentTimeMs=t.currentTimeMs,n<0||(e.timeWatchedMs+=n,this.updateAggregateHistogram(e.watchedMsByInViewPct,r,n),this.updateAggregateHistogram(e.watchedMsByViewportPct,a,n),this.updateMaxContinuousHistogram(e.maxContinuousWatchedMsByInViewPct,r,n),i.isMuted?this.resetContinuousViewDataForHistogram(e.maxContinuousWatchedWithAudioMsByInViewPct):(e.timeWatchedWithAudioMs+=n,this.updateAggregateHistogram(e.watchedWithAudioMsByInViewPct,r,n),this.updateMaxContinuousHistogram(e.maxContinuousWatchedWithAudioMsByInViewPct,r,n)),e.isFullscreenMode&&(e.timeWatchedFullscreenMs+=n,i.isMuted||(e.timeWatchedFullscreenWithAudioMs+=n)))},e.updateAggregateHistogram=function(t,e,i){if(0!==e)for(var n,r=100*e,a=h(Ae);!(n=a()).done;){var s=n.value;r>=s&&(t[s]+=i)}},e.updateMaxContinuousHistogram=function(t,e,i){if(0!==e)for(var n,r=100*e,a=h(Ae);!(n=a()).done;){var s=n.value;r>=s?t[s].current+=i:t[s].current>0&&this.resetContinuousViewDataForBucket(t[s])}else this.resetContinuousViewDataForHistogram(t)},e.constructVideoSessionDetails=function(t,e){return{video_details:{is_preroll_video:e.displayType===at,video_length:Math.round(e.durationMs),time_watched:Math.round(t.timeWatchedMs),time_watched_fullscreen:Math.round(t.timeWatchedFullscreenMs),time_watched_with_audio:Math.round(t.timeWatchedWithAudioMs),time_watched_fullscreen_with_audio:Math.round(t.timeWatchedFullscreenWithAudioMs),time_watched_100_with_audio:Math.round(t.watchedWithAudioMsByInViewPct[100]),video_type:ft[e.contentType],watched_ms_by_in_view_pct:this.constructAggregateHistogramPayload(t.watchedMsByInViewPct),watched_with_audio_ms_by_in_view_pct:this.constructAggregateHistogramPayload(t.watchedWithAudioMsByInViewPct),watched_ms_by_viewport_pct:this.constructAggregateHistogramPayload(t.watchedMsByViewportPct),max_continuous_watched_ms_by_in_view_pct:this.constructMaxContinuousHistogramPayload(t.maxContinuousWatchedMsByInViewPct),max_continuous_watched_with_audio_ms_by_in_view_pct:this.constructMaxContinuousHistogramPayload(t.maxContinuousWatchedWithAudioMsByInViewPct),sizes_info_at_the_start:{viewport_size:t.sizesInfoAtTheStart.viewportSize,ad_size:t.sizesInfoAtTheStart.mediaSize}}}},e.constructAggregateHistogramPayload=function(t){for(var e,i={},n=h(Ae);!(e=n()).done;){var r=e.value;i[r]=Math.round(t[r])}return{histogram:i}},e.constructMaxContinuousHistogramPayload=function(t){for(var e,i={},n=h(Ae);!(e=n()).done;){var r=e.value,a=t[r];i[r]=Math.round(Math.max(a.current,a.max))}return{histogram:i}},e.emitVideoSessionEvent=function(t,e){this.analytics.emit(et,t,e)},t}(),Ve=[nt,W,rt,V,T,I,A,it,x,L],xe=[V,I,A,it],Le=function(){function t(t,e){this.analytics=t,this.context=e,this.eventMap={},this.analytics.on(X,this.onTickEvent.bind(this)),this.analytics.on($,this.onTrackFinishedEvent.bind(this)),this.analytics.on(N,this.onPauseEvent.bind(this)),this.analytics.on(j,this.onPlaybackComplete.bind(this))}var e=t.prototype;return e.onTrackFinishedEvent=function(t){var e=Mt(t);if(void 0!==e){var i=this.eventMap[e.id];void 0!==i&&(e.shouldLoop?i.timePlayedToMs=0:this.eventMap[e.id]=void 0)}},e.onPlaybackComplete=function(t){var e=Mt(t);if(void 0!==e){var i=this.eventMap[e.id];void 0!==i&&this.context&&this.context.enableShortFormCompleteLogging&&this.emitOnce(L,i,t)}},e.onPauseEvent=function(t){this.resetContinuousViewEventTimingData(t)},e.onTickEvent=function(t){var e=Mt(t);if(void 0!==e){var i=this.eventMap[e.id];if(void 0===i){i={timePlayedToMs:e.currentTimeMs};for(var n,r=h(Ve);!(n=r()).done;){i[n.value]={timePlayedMs:0,visibilityWeightedTimePlayedMs:0,fired:!1}}this.eventMap[e.id]=i}t.isSeeking?(i.timePlayedToMs=e.currentTimeMs,this.resetContinuousViewEventTimingData(t)):(this.updateTimingData(e,i,t),this.checkViewEvents(e,i,t)),this.checkPlayFromTap(i,t)}},e.updateTimingData=function(t,e,i){var n=t.currentTimeMs-e.timePlayedToMs;e.timePlayedToMs=t.currentTimeMs;var r=i.percentVisible;r>=1&&(e[rt].timePlayedMs+=n),r>=1?e[V].timePlayedMs+=n:e[V].timePlayedMs=0,r>=.5&&It(i)?e[I].timePlayedMs+=n:e[I].timePlayedMs=0,r>=.5?e[A].timePlayedMs+=n:e[A].timePlayedMs=0,r>=1&&!i.isMuted&&(e[T].timePlayedMs+=n),r>=.5?e[it].timePlayedMs+=n:e[it].timePlayedMs=0,e[x].timePlayedMs+=n,r>=.5&&(e[x].visibilityWeightedTimePlayedMs+=r*n),e[L].timePlayedMs+=n},e.resetContinuousViewEventTimingData=function(t){var e=this.eventMap[t.currentTrackId];if(void 0!==e)for(var i,n=h(xe);!(i=n()).done;){e[i.value].timePlayedMs=0}},e.checkViewEvents=function(t,e,i){var n;e[rt].timePlayedMs>=(!(n=t).isLive&&n.durationMs>0&&!n.shouldLoop?Math.min(n.durationMs-500,Qt):Qt)&&(this.emitOnce(rt,e,i),this.emitOnce(nt,e,i)),e[V].timePlayedMs>=1e3&&this.emitOnce(V,e,i),e[T].timePlayedMs>=function(t){return!t.isLive&&t.durationMs>0?.5*t.durationMs:Number.MAX_SAFE_INTEGER}(t)&&this.emitOnce(T,e,i),e[I].timePlayedMs>=2e3&&this.emitOnce(I,e,i),e[A].timePlayedMs>=2e3&&this.emitOnce(A,e,i),e[it].timePlayedMs>=function(t){return!t.isLive&&t.durationMs>0?Math.min(.95*t.durationMs,1e4):1e4}(t)&&this.emitOnce(it,e,i);var r=e[x];r.timePlayedMs>=function(t){return!t.isLive&&t.durationMs>0?Math.min(.95*t.durationMs,6e3):6e3}(t)&&r.visibilityWeightedTimePlayedMs>=function(t){return!t.isLive&&t.durationMs>0?Math.min(.5*t.durationMs,3e3):3e3}(t)&&this.emitOnce(x,e,i),this.context&&this.context.enableShortFormCompleteLogging&&e[L].timePlayedMs>=15e3&&this.emitOnce(L,e,i)},e.checkPlayFromTap=function(t,e){e.isPlaying&&!e.isPreview&&(this.emitOnce(W,t,e),this.emitOnce(nt,t,e))},e.emitOnce=function(t,e,i){e[t].fired||(this.analytics.emit(t,i),e[t].fired=!0)},t}();const Ne=function(t){function e(e,i,n,r,a){var s;(s=t.call(this)||this).scribeListener=new Ee((0,o.Z)(s),e,r),s.behavioralEventListener=new xt((0,o.Z)(s),a),s.promotedLogListener=new re((0,o.Z)(s),i),s.tentpoleListener=new Ie((0,o.Z)(s)),s.viewListener=new Le((0,o.Z)(s),r),s.playbackLapseListener=new te((0,o.Z)(s)),s.errorListener=new Dt((0,o.Z)(s)),s.beaconListener=new Vt((0,o.Z)(s)),s.rewindListener=new ae((0,o.Z)(s)),s.heartbeatListener=new Ft((0,o.Z)(s)),s.loopListener=new Ut((0,o.Z)(s)),s.intendToPlayListener=new jt((0,o.Z)(s)),s.videoSessionListener=new Oe((0,o.Z)(s)),s.ctaImpressionListener=new Nt((0,o.Z)(s)),s.captionsListener=new Lt((0,o.Z)(s));var c=new Jt(n,r),u=new qt(c);return s.lifecycleListener=new $t((0,o.Z)(s),u),s}(0,c.Z)(e,t);var i=e.prototype;return i.onTickEvent=function(t){this.emit(X,t)},i.onReplay=function(t){var e=Mt(t);void 0!==e&&(e.shouldLoop||this.emit(Y,t))},i.onTrackFinished=function(t){this.emit($,t)},i.onIntendToPlay=function(t){this.emit(M,t)},i.onPlay=function(t){this.emit(D,t)},i.onPause=function(t){this.emit(N,t)},i.onMute=function(t){this.emit(O,t)},i.onUnmute=function(t){this.emit(tt,t)},i.onFullScreen=function(t){this.emit(b,t)},i.onShrink=function(t){this.emit(J,t)},i.onAdSkip=function(t){this.emit(v,t)},i.onCtaImpression=function(t){this.emit(_,t)},i.onCtaClick=function(t){this.emit(m,t)},i.onConfigLoaded=function(t){this.emit(y,t)},i.onError=function(t,e){this.emit(g,t,e)},i.onTeardown=function(t){this.emit(q,t)},i.onManualQualityLevelChange=function(t,e){this.emit(C,t,e)},i.onPlaybackSpeedChange=function(t,e){this.emit(K,t,e)},e}(d())},38250:(t,e,i)=>{"use strict";i.d(e,{o:()=>p,Z:()=>y});var n=i(7896),r=(i(6886),i(2784)),a=i(28316),s=i(12934),o=i(73186),c=i(5422),u=i(31798),l=i(32307);function d(t){let e=h(t);return t=>{const i=h(t);return(0,l.Z)(e,i)||(e=i),e}}function h(t){if(!t||"object"!=typeof t)return t;const e=JSON.parse(JSON.stringify(t));return delete e.dataUsageBytes,e.tracks=e.tracks.map((t=>("number"==typeof t.currentTimeMs&&delete t.currentTimeMs,t))),e}function p({children:t,periodic:e}){const i=e?v.PeriodicContext.Consumer:v.Context.Consumer;return r.createElement(i,null,(e=>{const{aspectRatio:i,containerRef:n,guestsState:r,playerApi:a,playerState:s}=e;return a&&n&&s?t({aspectRatio:i,guestsState:r,playerApi:a,playerState:s,containerRef:n}):null}))}class v extends r.Component{constructor(...t){super(...t),this._cache={stablePlayerState:d(null)},this.state={hasError:null,guestsState:null,playerApi:null,playerState:null,stablePlayerState:null},this._renderCustomOverlay=()=>{const{children:t}=this.props,{guestsState:e,playerApi:i,stablePlayerState:n}=this.state;return i&&t?"function"==typeof t?t({guestsState:e,playerApi:i,playerState:n,containerRef:this._containerRef}):t:null},this._handleReload=()=>this.setState((()=>({hasError:null}))),this._handlePlayerApi=t=>e=>{const{playerId:i}=this.props;this.setState({playerApi:e}),this.props.onApiReady&&this.props.onApiReady(e),i&&t&&(this._unregister=t(i,e)),this._unsubscribe=e.subscribe(((t,e)=>{const i=this._cache.stablePlayerState(t);this.setState({stablePlayerState:i,playerState:t,guestsState:e}),this.props.onStateUpdate&&this.props.onStateUpdate(t,e)}))}}componentWillUnmount(){this._unregister&&this._unregister(),this._unsubscribe&&this._unsubscribe()}componentDidUpdate(){if(!this._containerRef){const t=a.findDOMNode(this);t&&t instanceof HTMLElement&&(this._containerRef=t)}}componentDidCatch(t,e){const i={error:t,info:e};this.setState((()=>({hasError:i})))}render(){const{guestsState:t,playerApi:e,playerState:i,stablePlayerState:a}=this.state,{aspectRatio:o,basePlayerClass:l,children:d,includeDisputeLinkInCopyrightErrorMessage:h,objectFitVideo:p,onApiReady:y,onStateUpdate:m,playerId:_,size:g,...b}=this.props,T={aspectRatio:this.props.aspectRatio,guestsState:t,playerApi:e,playerState:i,containerRef:this._containerRef},E={...T,playerState:a};return r.createElement(s.Z,{ratio:o,style:[f.root,f[g]]},this.state.hasError?r.createElement(c.Z,{onReloadPress:this._handleReload}):r.createElement(v.Context.Provider,{value:E},r.createElement(v.PeriodicContext.Provider,{value:T},r.createElement(u.Z.RegistrationContext.Consumer,null,(({registerPlayer:t})=>r.createElement(l,(0,n.Z)({},b,{customOverlay:this._renderCustomOverlay(),displayOptions:{objectFitVideo:p},setPlayerApi:this._handlePlayerApi(t)})))))))}}v.Consumer=p,v.defaultProps={aspectRatio:o.Z.theme.aspectRatios.landscape,size:"fill"},v.Context=r.createContext({aspectRatio:o.Z.theme.aspectRatios.landscape,guestsState:null,playerApi:null,playerState:null,containerRef:null}),v.PeriodicContext=r.createContext({aspectRatio:o.Z.theme.aspectRatios.landscape,guestsState:null,playerApi:null,playerState:null,containerRef:null});const f=o.Z.create({root:{position:"relative"},fill:{width:"100%",height:"100%"},small:{width:480,height:270},medium:{width:640,height:360},large:{width:800,height:450}}),y=v},31798:(t,e,i)=>{"use strict";i.d(e,{Z:()=>a});i(6886);var n=i(2784);class r extends n.Component{constructor(...t){super(...t),this.state={playerApi:void 0,playerState:void 0,guestsState:void 0},this._initializeState=t=>{t&&(this._unsubscribe&&this._unsubscribe(),this.setState({playerApi:t}),this._unsubscribe=t.subscribe(((t,e)=>this.setState({playerState:t,guestsState:e}))))}}componentDidMount(){this._initializeState(this.props.playerApi)}componentDidUpdate(t){const{playerApi:e}=this.props;e!==t.playerApi&&this._initializeState(e)}render(){return this.props.children(this.state)}}class a extends n.Component{constructor(...t){super(...t),this.state={players:{}},this._mounted=!1,this._registerPlayer=(t,e)=>{const i=new Promise((i=>{setTimeout((()=>{this._mounted?this.setState((i=>({players:{...i.players,[t]:e}})),i):i()}))}));return()=>{i.then((()=>this._unregisterPlayer(t)))}},this._unregisterPlayer=t=>{this._mounted&&this.setState((e=>{const{[t]:i,...n}=this.state.players;return{players:n}}))},this._registrationContext={registerPlayer:this._registerPlayer}}componentDidMount(){this._mounted=!0}componentWillUnmount(){this._mounted=!1}render(){return n.createElement(a.RegistrationContext.Provider,{value:this._registrationContext},n.createElement(a.ProviderContext.Provider,{value:this.state},this.props.children))}}a.MetadataSubscriber=({children:t,playerId:e})=>n.createElement(a.ProviderContext.Consumer,null,(({players:i})=>n.createElement(r,{playerApi:i&&i[e]},t))),a.RegistrationContext=n.createContext({registerPlayer:void 0}),a.ProviderContext=n.createContext({players:{}})},86570:(t,e,i)=>{"use strict";var n=i(89996).forEach,r=i(96038)("forEach");t.exports=r?[].forEach:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}},48639:(t,e,i)=>{var n=i(95189),r=i(28801);t.exports=!n&&!r&&"object"==typeof window&&"object"==typeof document},95189:t=>{t.exports="object"==typeof Deno&&Deno&&"object"==typeof Deno.version},8983:(t,e,i)=>{var n=i(80598),r=i(9859);t.exports=/ipad|iphone|ipod/i.test(n)&&void 0!==r.Pebble},32023:(t,e,i)=>{var n=i(80598);t.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(n)},10263:(t,e,i)=>{var n=i(80598);t.exports=/web0s(?!.*chrome)/i.test(n)},94128:(t,e,i)=>{"use strict";var n=i(65968),r=i(77111),a=i(85052),s=i(98270),o=i(1909),c=i(57188),u=Function,l=n([].concat),d=n([].join),h={},p=function(t,e,i){if(!s(h,e)){for(var n=[],r=0;r<e;r++)n[r]="a["+r+"]";h[e]=u("C,a","return new C("+d(n,",")+")")}return h[e](t,i)};t.exports=c?u.bind:function(t){var e=r(this),i=e.prototype,n=o(arguments,1),s=function(){var i=l(n,o(arguments));return this instanceof s?p(e,i.length,i):e.apply(t,i)};return a(i)&&(s.prototype=i),s}},14665:(t,e,i)=>{var n=i(9859);t.exports=function(t,e){var i=n.console;i&&i.error&&(1==arguments.length?i.error(t):i.error(t,e))}},89003:(t,e,i)=>{var n=i(97636),r=i(20266),a=i(21176),s=i(59821),o=i(91943),c=i(39646),u=i(91321),l=i(28403),d=i(78830),h=i(57281),p=TypeError,v=function(t,e){this.stopped=t,this.result=e},f=v.prototype;t.exports=function(t,e,i){var y,m,_,g,b,T,E,w=i&&i.that,P=!(!i||!i.AS_ENTRIES),S=!(!i||!i.IS_RECORD),M=!(!i||!i.IS_ITERATOR),k=!(!i||!i.INTERRUPTED),C=n(e,w),I=function(t){return y&&h(y,"normal",t),new v(!0,t)},A=function(t){return P?(a(t),k?C(t[0],t[1],I):C(t[0],t[1])):k?C(t,I):C(t)};if(S)y=t.iterator;else if(M)y=t;else{if(!(m=d(t)))throw p(s(t)+" is not iterable");if(o(m)){for(_=0,g=c(t);g>_;_++)if((b=A(t[_]))&&u(f,b))return b;return new v(!1)}y=l(t,m)}for(T=S?t.next:y.next;!(E=r(T,y)).done;){try{b=A(E.value)}catch(t){h(y,"throw",t)}if("object"==typeof b&&b&&u(f,b))return b}return new v(!1)}},24794:(t,e,i)=>{var n,r,a,s,o,c,u,l,d=i(9859),h=i(97636),p=i(97933).f,v=i(55795).set,f=i(32023),y=i(8983),m=i(10263),_=i(28801),g=d.MutationObserver||d.WebKitMutationObserver,b=d.document,T=d.process,E=d.Promise,w=p(d,"queueMicrotask"),P=w&&w.value;P||(n=function(){var t,e;for(_&&(t=T.domain)&&t.exit();r;){e=r.fn,r=r.next;try{e()}catch(t){throw r?s():a=void 0,t}}a=void 0,t&&t.enter()},f||_||m||!g||!b?!y&&E&&E.resolve?((u=E.resolve(void 0)).constructor=E,l=h(u.then,u),s=function(){l(n)}):_?s=function(){T.nextTick(n)}:(v=h(v,d),s=function(){v(n)}):(o=!0,c=b.createTextNode(""),new g(n).observe(c,{characterData:!0}),s=function(){c.data=o=!o})),t.exports=P||function(t){var e={fn:t,next:void 0};a&&(a.next=e),r||(r=e,s()),a=e}},10166:(t,e,i)=>{var n=i(27079),r=i(10905),a=i(78151).f,s=i(69794),o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return o&&"Window"==n(t)?function(t){try{return a(t)}catch(t){return s(o)}}(t):a(r(t))}},44059:(t,e,i)=>{"use strict";var n=i(71601),r=i(81589);t.exports=n?{}.toString:function(){return"[object "+r(this)+"]"}},49276:(t,e,i)=>{var n=i(9859);t.exports=n},64624:t=>{t.exports=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}}},38321:(t,e,i)=>{var n=i(9859),r=i(74473),a=i(26733),s=i(46541),o=i(8511),c=i(70095),u=i(48639),l=i(95189),d=i(24231),h=i(6358),p=r&&r.prototype,v=c("species"),f=!1,y=a(n.PromiseRejectionEvent),m=s("Promise",(function(){var t=o(r),e=t!==String(r);if(!e&&66===h)return!0;if(d&&(!p.catch||!p.finally))return!0;if(!h||h<51||!/native code/.test(t)){var i=new r((function(t){t(1)})),n=function(t){t((function(){}),(function(){}))};if((i.constructor={})[v]=n,!(f=i.then((function(){}))instanceof n))return!0}return!e&&(u||l)&&!y}));t.exports={CONSTRUCTOR:m,REJECTION_EVENT:y,SUBCLASSING:f}},96866:(t,e,i)=>{var n=i(74473),r=i(74575),a=i(38321).CONSTRUCTOR;t.exports=a||!r((function(t){n.all(t).then(void 0,(function(){}))}))},93358:t=>{var e=function(){this.head=null,this.tail=null};e.prototype={add:function(t){var e={item:t,next:null};this.head?this.tail.next=e:this.head=e,this.tail=e},get:function(){var t=this.head;if(t)return this.head=t.next,this.tail===t&&(this.tail=null),t.item}},t.exports=e},24752:(t,e,i)=>{var n=i(9859),r=i(53171),a=i(26733),s=i(80598),o=i(1909),c=i(77579),u=/MSIE .\./.test(s),l=n.Function,d=function(t){return u?function(e,i){var n=c(arguments.length,1)>2,s=a(e)?e:l(e),u=n?o(arguments,2):void 0;return t(n?function(){r(s,this,u)}:s,i)}:t};t.exports={setTimeout:d(n.setTimeout),setInterval:d(n.setInterval)}},65989:(t,e,i)=>{var n=i(20266),r=i(31333),a=i(70095),s=i(14768);t.exports=function(){var t=r("Symbol"),e=t&&t.prototype,i=e&&e.valueOf,o=a("toPrimitive");e&&!e[o]&&s(e,o,(function(t){return n(i,this)}),{arity:1})}},55957:(t,e,i)=>{var n=i(44860);t.exports=n&&!!Symbol.for&&!!Symbol.keyFor},55795:(t,e,i)=>{var n,r,a,s,o=i(9859),c=i(53171),u=i(97636),l=i(26733),d=i(98270),h=i(24229),p=i(53777),v=i(1909),f=i(22635),y=i(77579),m=i(32023),_=i(28801),g=o.setImmediate,b=o.clearImmediate,T=o.process,E=o.Dispatch,w=o.Function,P=o.MessageChannel,S=o.String,M=0,k={},C="onreadystatechange";try{n=o.location}catch(t){}var I=function(t){if(d(k,t)){var e=k[t];delete k[t],e()}},A=function(t){return function(){I(t)}},O=function(t){I(t.data)},V=function(t){o.postMessage(S(t),n.protocol+"//"+n.host)};g&&b||(g=function(t){y(arguments.length,1);var e=l(t)?t:w(t),i=v(arguments,1);return k[++M]=function(){c(e,void 0,i)},r(M),M},b=function(t){delete k[t]},_?r=function(t){T.nextTick(A(t))}:E&&E.now?r=function(t){E.now(A(t))}:P&&!m?(s=(a=new P).port2,a.port1.onmessage=O,r=u(s.postMessage,s)):o.addEventListener&&l(o.postMessage)&&!o.importScripts&&n&&"file:"!==n.protocol&&!h(V)?(r=V,o.addEventListener("message",O,!1)):r=C in f("script")?function(t){p.appendChild(f("script")).onreadystatechange=function(){p.removeChild(this),I(t)}}:function(t){setTimeout(A(t),0)}),t.exports={set:g,clear:b}},63524:(t,e,i)=>{var n=i(49276),r=i(98270),a=i(55391),s=i(31787).f;t.exports=function(t){var e=n.Symbol||(n.Symbol={});r(e,t)||s(e,t,{value:a.f(t)})}},55391:(t,e,i)=>{var n=i(70095);e.f=n},14762:(t,e,i)=>{"use strict";var n=i(23103),r=i(89996).find,a=i(9736),s="find",o=!0;s in[]&&Array(1).find((function(){o=!1})),n({target:"Array",proto:!0,forced:o},{find:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),a(s)},38695:(t,e,i)=>{"use strict";var n=i(23103),r=i(86570);n({target:"Array",proto:!0,forced:[].forEach!=r},{forEach:r})},24895:(t,e,i)=>{var n=i(23103),r=i(65968),a=Date,s=r(a.prototype.getTime);n({target:"Date",stat:!0},{now:function(){return s(new a)}})},99120:(t,e,i)=>{var n=i(65968),r=i(14768),a=Date.prototype,s="Invalid Date",o="toString",c=n(a.toString),u=n(a.getTime);String(new Date(NaN))!=s&&r(a,o,(function(){var t=u(this);return t==t?c(this):s}))},65584:(t,e,i)=>{var n=i(23103),r=i(94128);n({target:"Function",proto:!0,forced:Function.bind!==r},{bind:r})},26936:(t,e,i)=>{var n=i(7400),r=i(51805).EXISTS,a=i(65968),s=i(31787).f,o=Function.prototype,c=a(o.toString),u=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,l=a(u.exec);n&&!r&&s(o,"name",{configurable:!0,get:function(){try{return l(u,c(this))[1]}catch(t){return""}}})},6710:(t,e,i)=>{var n=i(23103),r=i(31333),a=i(53171),s=i(20266),o=i(65968),c=i(24229),u=i(33718),l=i(26733),d=i(85052),h=i(49395),p=i(1909),v=i(44860),f=r("JSON","stringify"),y=o(/./.exec),m=o("".charAt),_=o("".charCodeAt),g=o("".replace),b=o(1..toString),T=/[\uD800-\uDFFF]/g,E=/^[\uD800-\uDBFF]$/,w=/^[\uDC00-\uDFFF]$/,P=!v||c((function(){var t=r("Symbol")();return"[null]"!=f([t])||"{}"!=f({a:t})||"{}"!=f(Object(t))})),S=c((function(){return'"\\udf06\\ud834"'!==f("\udf06\ud834")||'"\\udead"'!==f("\udead")})),M=function(t,e){var i=p(arguments),n=e;if((d(e)||void 0!==t)&&!h(t))return u(e)||(e=function(t,e){if(l(n)&&(e=s(n,this,t,e)),!h(e))return e}),i[1]=e,a(f,null,i)},k=function(t,e,i){var n=m(i,e-1),r=m(i,e+1);return y(E,t)&&!y(w,r)||y(w,t)&&!y(E,n)?"\\u"+b(_(t,0),16):t};f&&n({target:"JSON",stat:!0,arity:3,forced:P||S},{stringify:function(t,e,i){var n=p(arguments),r=a(P?M:f,null,n);return S&&"string"==typeof r?g(r,T,k):r}})},14586:(t,e,i)=>{i(23103)({target:"Number",stat:!0},{isNaN:function(t){return t!=t}})},58143:(t,e,i)=>{i(23103)({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{MAX_SAFE_INTEGER:9007199254740991})},82067:(t,e,i)=>{var n=i(23103),r=i(44860),a=i(24229),s=i(10894),o=i(92991);n({target:"Object",stat:!0,forced:!r||a((function(){s.f(1)}))},{getOwnPropertySymbols:function(t){var e=s.f;return e?e(o(t)):[]}})},58188:(t,e,i)=>{var n=i(71601),r=i(14768),a=i(44059);n||r(Object.prototype,"toString",a,{unsafe:!0})},56032:(t,e,i)=>{"use strict";var n=i(23103),r=i(20266),a=i(77111),s=i(16485),o=i(64624),c=i(89003);n({target:"Promise",stat:!0,forced:i(96866)},{all:function(t){var e=this,i=s.f(e),n=i.resolve,u=i.reject,l=o((function(){var i=a(e.resolve),s=[],o=0,l=1;c(t,(function(t){var a=o++,c=!1;l++,r(i,e,t).then((function(t){c||(c=!0,s[a]=t,--l||n(s))}),u)})),--l||n(s)}));return l.error&&u(l.value),i.promise}})},6135:(t,e,i)=>{"use strict";var n=i(23103),r=i(24231),a=i(38321).CONSTRUCTOR,s=i(74473),o=i(31333),c=i(26733),u=i(14768),l=s&&s.prototype;if(n({target:"Promise",proto:!0,forced:a,real:!0},{catch:function(t){return this.then(void 0,t)}}),!r&&c(s)){var d=o("Promise").prototype.catch;l.catch!==d&&u(l,"catch",d,{unsafe:!0})}},86087:(t,e,i)=>{"use strict";var n,r,a,s=i(23103),o=i(24231),c=i(28801),u=i(9859),l=i(20266),d=i(14768),h=i(56540),p=i(54555),v=i(71832),f=i(77111),y=i(26733),m=i(85052),_=i(57728),g=i(37942),b=i(55795).set,T=i(24794),E=i(14665),w=i(64624),P=i(93358),S=i(56407),M=i(74473),k=i(38321),C=i(16485),I="Promise",A=k.CONSTRUCTOR,O=k.REJECTION_EVENT,V=k.SUBCLASSING,x=S.getterFor(I),L=S.set,N=M&&M.prototype,D=M,W=N,R=u.TypeError,F=u.document,B=u.process,H=C.f,j=H,U=!!(F&&F.createEvent&&u.dispatchEvent),Z="unhandledrejection",K=function(t){var e;return!(!m(t)||!y(e=t.then))&&e},z=function(t,e){var i,n,r,a=e.value,s=1==e.state,o=s?t.ok:t.fail,c=t.resolve,u=t.reject,d=t.domain;try{o?(s||(2===e.rejection&&q(e),e.rejection=1),!0===o?i=a:(d&&d.enter(),i=o(a),d&&(d.exit(),r=!0)),i===t.promise?u(R("Promise-chain cycle")):(n=K(i))?l(n,i,c,u):c(i)):u(a)}catch(t){d&&!r&&d.exit(),u(t)}},Y=function(t,e){t.notified||(t.notified=!0,T((function(){for(var i,n=t.reactions;i=n.get();)z(i,t);t.notified=!1,e&&!t.rejection&&J(t)})))},G=function(t,e,i){var n,r;U?((n=F.createEvent("Event")).promise=e,n.reason=i,n.initEvent(t,!1,!0),u.dispatchEvent(n)):n={promise:e,reason:i},!O&&(r=u["on"+t])?r(n):t===Z&&E("Unhandled promise rejection",i)},J=function(t){l(b,u,(function(){var e,i=t.facade,n=t.value;if(Q(t)&&(e=w((function(){c?B.emit("unhandledRejection",n,i):G(Z,i,n)})),t.rejection=c||Q(t)?2:1,e.error))throw e.value}))},Q=function(t){return 1!==t.rejection&&!t.parent},q=function(t){l(b,u,(function(){var e=t.facade;c?B.emit("rejectionHandled",e):G("rejectionhandled",e,t.value)}))},X=function(t,e,i){return function(n){t(e,n,i)}},$=function(t,e,i){t.done||(t.done=!0,i&&(t=i),t.value=e,t.state=2,Y(t,!0))},tt=function(t,e,i){if(!t.done){t.done=!0,i&&(t=i);try{if(t.facade===e)throw R("Promise can't be resolved itself");var n=K(e);n?T((function(){var i={done:!1};try{l(n,e,X(tt,i,t),X($,i,t))}catch(e){$(i,e,t)}})):(t.value=e,t.state=1,Y(t,!1))}catch(e){$({done:!1},e,t)}}};if(A&&(W=(D=function(t){_(this,W),f(t),l(n,this);var e=x(this);try{t(X(tt,e),X($,e))}catch(t){$(e,t)}}).prototype,(n=function(t){L(this,{type:I,done:!1,notified:!1,parent:!1,reactions:new P,rejection:!1,state:0,value:void 0})}).prototype=d(W,"then",(function(t,e){var i=x(this),n=H(g(this,D));return i.parent=!0,n.ok=!y(t)||t,n.fail=y(e)&&e,n.domain=c?B.domain:void 0,0==i.state?i.reactions.add(n):T((function(){z(n,i)})),n.promise})),r=function(){var t=new n,e=x(t);this.promise=t,this.resolve=X(tt,e),this.reject=X($,e)},C.f=H=function(t){return t===D||undefined===t?new r(t):j(t)},!o&&y(M)&&N!==Object.prototype)){a=N.then,V||d(N,"then",(function(t,e){var i=this;return new D((function(t,e){l(a,i,t,e)})).then(t,e)}),{unsafe:!0});try{delete N.constructor}catch(t){}h&&h(N,W)}s({global:!0,constructor:!0,wrap:!0,forced:A},{Promise:D}),p(D,I,!1,!0),v(I)},34114:(t,e,i)=>{i(86087),i(56032),i(6135),i(26767),i(39320),i(52047)},26767:(t,e,i)=>{"use strict";var n=i(23103),r=i(20266),a=i(77111),s=i(16485),o=i(64624),c=i(89003);n({target:"Promise",stat:!0,forced:i(96866)},{race:function(t){var e=this,i=s.f(e),n=i.reject,u=o((function(){var s=a(e.resolve);c(t,(function(t){r(s,e,t).then(i.resolve,n)}))}));return u.error&&n(u.value),i.promise}})},39320:(t,e,i)=>{"use strict";var n=i(23103),r=i(20266),a=i(16485);n({target:"Promise",stat:!0,forced:i(38321).CONSTRUCTOR},{reject:function(t){var e=a.f(this);return r(e.reject,void 0,t),e.promise}})},52047:(t,e,i)=>{"use strict";var n=i(23103),r=i(31333),a=i(24231),s=i(74473),o=i(38321).CONSTRUCTOR,c=i(62391),u=r("Promise"),l=a&&!o;n({target:"Promise",stat:!0,forced:a||o},{resolve:function(t){return c(l&&this===u?s:this,t)}})},39956:(t,e,i)=>{"use strict";var n=i(23103),r=i(9859),a=i(20266),s=i(65968),o=i(24231),c=i(7400),u=i(44860),l=i(24229),d=i(98270),h=i(91321),p=i(21176),v=i(10905),f=i(39310),y=i(83326),m=i(65358),_=i(22391),g=i(65632),b=i(78151),T=i(10166),E=i(10894),w=i(97933),P=i(31787),S=i(90219),M=i(19195),k=i(14768),C=i(33036),I=i(44399),A=i(95977),O=i(81441),V=i(70095),x=i(55391),L=i(63524),N=i(65989),D=i(54555),W=i(56407),R=i(89996).forEach,F=I("hidden"),B="Symbol",H=W.set,j=W.getterFor(B),U=Object.prototype,Z=r.Symbol,K=Z&&Z.prototype,z=r.TypeError,Y=r.QObject,G=w.f,J=P.f,Q=T.f,q=M.f,X=s([].push),$=C("symbols"),tt=C("op-symbols"),et=C("wks"),it=!Y||!Y.prototype||!Y.prototype.findChild,nt=c&&l((function(){return 7!=_(J({},"a",{get:function(){return J(this,"a",{value:7}).a}})).a}))?function(t,e,i){var n=G(U,e);n&&delete U[e],J(t,e,i),n&&t!==U&&J(U,e,n)}:J,rt=function(t,e){var i=$[t]=_(K);return H(i,{type:B,tag:t,description:e}),c||(i.description=e),i},at=function(t,e,i){t===U&&at(tt,e,i),p(t);var n=f(e);return p(i),d($,n)?(i.enumerable?(d(t,F)&&t[F][n]&&(t[F][n]=!1),i=_(i,{enumerable:m(0,!1)})):(d(t,F)||J(t,F,m(1,{})),t[F][n]=!0),nt(t,n,i)):J(t,n,i)},st=function(t,e){p(t);var i=v(e),n=g(i).concat(lt(i));return R(n,(function(e){c&&!a(ot,i,e)||at(t,e,i[e])})),t},ot=function(t){var e=f(t),i=a(q,this,e);return!(this===U&&d($,e)&&!d(tt,e))&&(!(i||!d(this,e)||!d($,e)||d(this,F)&&this[F][e])||i)},ct=function(t,e){var i=v(t),n=f(e);if(i!==U||!d($,n)||d(tt,n)){var r=G(i,n);return!r||!d($,n)||d(i,F)&&i[F][n]||(r.enumerable=!0),r}},ut=function(t){var e=Q(v(t)),i=[];return R(e,(function(t){d($,t)||d(A,t)||X(i,t)})),i},lt=function(t){var e=t===U,i=Q(e?tt:v(t)),n=[];return R(i,(function(t){!d($,t)||e&&!d(U,t)||X(n,$[t])})),n};u||(k(K=(Z=function(){if(h(K,this))throw z("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?y(arguments[0]):void 0,e=O(t),i=function(t){this===U&&a(i,tt,t),d(this,F)&&d(this[F],e)&&(this[F][e]=!1),nt(this,e,m(1,t))};return c&&it&&nt(U,e,{configurable:!0,set:i}),rt(e,t)}).prototype,"toString",(function(){return j(this).tag})),k(Z,"withoutSetter",(function(t){return rt(O(t),t)})),M.f=ot,P.f=at,S.f=st,w.f=ct,b.f=T.f=ut,E.f=lt,x.f=function(t){return rt(V(t),t)},c&&(J(K,"description",{configurable:!0,get:function(){return j(this).description}}),o||k(U,"propertyIsEnumerable",ot,{unsafe:!0}))),n({global:!0,constructor:!0,wrap:!0,forced:!u,sham:!u},{Symbol:Z}),R(g(et),(function(t){L(t)})),n({target:B,stat:!0,forced:!u},{useSetter:function(){it=!0},useSimple:function(){it=!1}}),n({target:"Object",stat:!0,forced:!u,sham:!c},{create:function(t,e){return void 0===e?_(t):st(_(t),e)},defineProperty:at,defineProperties:st,getOwnPropertyDescriptor:ct}),n({target:"Object",stat:!0,forced:!u},{getOwnPropertyNames:ut}),N(),D(Z,B),A[F]=!0},634:(t,e,i)=>{"use strict";var n=i(23103),r=i(7400),a=i(9859),s=i(65968),o=i(98270),c=i(26733),u=i(91321),l=i(83326),d=i(31787).f,h=i(77081),p=a.Symbol,v=p&&p.prototype;if(r&&c(p)&&(!("description"in v)||void 0!==p().description)){var f={},y=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:l(arguments[0]),e=u(v,this)?new p(t):void 0===t?p():p(t);return""===t&&(f[e]=!0),e};h(y,p),y.prototype=v,v.constructor=y;var m="Symbol(test)"==String(p("test")),_=s(v.valueOf),g=s(v.toString),b=/^Symbol\((.*)\)[^)]+$/,T=s("".replace),E=s("".slice);d(v,"description",{configurable:!0,get:function(){var t=_(this);if(o(f,t))return"";var e=g(t),i=m?E(e,7,-1):T(e,b,"$1");return""===i?void 0:i}}),n({global:!0,constructor:!0,forced:!0},{Symbol:y})}},23352:(t,e,i)=>{var n=i(23103),r=i(31333),a=i(98270),s=i(83326),o=i(33036),c=i(55957),u=o("string-to-symbol-registry"),l=o("symbol-to-string-registry");n({target:"Symbol",stat:!0,forced:!c},{for:function(t){var e=s(t);if(a(u,e))return u[e];var i=r("Symbol")(e);return u[e]=i,l[i]=e,i}})},20796:(t,e,i)=>{i(63524)("iterator")},34115:(t,e,i)=>{i(39956),i(23352),i(49717),i(6710),i(82067)},49717:(t,e,i)=>{var n=i(23103),r=i(98270),a=i(49395),s=i(59821),o=i(33036),c=i(55957),u=o("symbol-to-string-registry");n({target:"Symbol",stat:!0,forced:!c},{keyFor:function(t){if(!a(t))throw TypeError(s(t)+" is not a symbol");if(r(u,t))return u[t]}})},1939:(t,e,i)=>{var n=i(9859),r=i(95694),a=i(18865),s=i(86570),o=i(75762),c=function(t){if(t&&t.forEach!==s)try{o(t,"forEach",s)}catch(e){t.forEach=s}};for(var u in r)r[u]&&c(n[u]&&n[u].prototype);c(a)},73801:(t,e,i)=>{var n=i(23103),r=i(9859),a=i(24752).setInterval;n({global:!0,bind:!0,forced:r.setInterval!==a},{setInterval:a})},98540:(t,e,i)=>{var n=i(23103),r=i(9859),a=i(24752).setTimeout;n({global:!0,bind:!0,forced:r.setTimeout!==a},{setTimeout:a})},54226:(t,e,i)=>{i(73801),i(98540)},80753:(t,e,i)=>{"use strict";function n(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}i.d(e,{Z:()=>n})}}]);
//# sourceMappingURL=https://ton.local.twitter.com/responsive-web-internal/sourcemaps/client-web/shared~ondemand.InlinePlayer~loader.AudioOnlyVideoPlayer~ondemand.immersiveTweetHandler.5c5ebc9a.js.map